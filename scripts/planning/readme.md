## Planning scripts

- `merge_dedup.py`: merge multiple exports (CSV and BibTeX), normalize fields, and deduplicate records to produce `data/planning/merged_dedup.csv`. Uses a stable key to drop repeats and keeps the first occurrence.
- `prioritize.py`: loads the deduped file, keeps records with `year >= 2015`, computes a simple priority score/bucket (`priority_score`, `priority_bucket`), and writes `data/planning/merged_prioritized.csv` so downstream analyses focus on recent papers first.
- `abstract_stats.py`: tags each paper with problem/method keywords using `title + abstract` text. Saves counts and cross-tabs to `results/planning/`: `problem_counts.csv`, `method_counts.csv`, `problem_method_matrix.csv`, and `term_trend_year.csv` (per-term counts by year). Prints a short console summary after writing the files.
- `pub_trend.py`: counts publications per year from the prioritized (or dedup) CSV, then saves `year_counts.csv` plus bar plots `year_counts.png` and `year_counts.pdf` in `results/planning/`. The plots use `.plot/plotconfig.py` if present (Gulliver font); otherwise fall back to matplotlib defaults. Layout is tightened for print-ready export.
- `topic_map.py`: builds the 2D “bubble” topic map. Steps: (1) concatenate `title + abstract`; (2) embed with `all-MiniLM-L6-v2`; (3) cluster embeddings with KMeans (numeric cluster IDs); (4) project to 2D with UMAP; (5) write `results/planning/topic_map.csv` containing all original columns plus `x`, `y`, and `cluster`; (6) extract top 3 frequent terms per cluster via `CountVectorizer` and save `topic_map_cluster_summary.csv` with counts and labels; (7) save annotated plots `topic_map.png` and `topic_map.pdf`. Plot labels show `cluster number: top_term_1, top_term_2, top_term_3` for quick interpretation.
- `extra_maps.py`: complementary views. Generates (a) t-SNE map as an alternate 2D projection of the same embeddings + KMeans clusters; (b) cluster share over time (stacked area) to see how topic prevalence evolves by year; (c) problem × method heatmap using the same keyword lists from `abstract_stats.py`. Outputs go to `results/planning/`: `tsne_map.csv/png/pdf`, `cluster_share_by_year.csv/png/pdf`, and `problem_method_heatmap.csv/png/pdf`. Also saves `tsne_cluster_terms.csv` with top terms per cluster for reference.

Notes
- Default input for all scripts is `data/planning/merged_prioritized.csv`; they automatically fall back to `merged_dedup.csv` if the prioritized file is missing.
- Gulliver font is optional via `.plot/plotconfig.py`; if absent, the scripts keep matplotlib defaults.
